{"ast":null,"code":"var _jsxFileName = \"/home/iowk/exhibition_map/frontend/src/main.jsx\";\nimport React, { Component } from 'react';\nimport './main.css';\nimport axios from './axios';\nimport NavBar from './components/navbar';\nimport Map from './components/map';\nimport InfoBlock from './components/infoblock';\nimport { jwtVerify } from './auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Main extends Component {\n  // Full main page\n  constructor(props) {\n    super(props);\n\n    this.handleClickLandmark = landmarkId => {\n      // Landmark is clicked on\n      this.setState({\n        curLandmarkId: landmarkId,\n        isInitial: false\n      });\n    };\n\n    this.state = {\n      isInitial: true,\n      // Initial main page without landmark clicked\n      isVerified: true,\n      landmarks: {},\n      // All landmarks on the map\n      curLandmarkId: 0 // ID of currently clicked landmark\n\n    };\n  }\n\n  async componentDidMount() {\n    // GET all landmarks on the map\n    try {\n      await jwtVerify();\n      this.setState({\n        isVerified: true\n      });\n      const res = await axios().get('/map/landmarks/');\n      const landmarks = await res.data;\n      this.setState({\n        landmarks: landmarks\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [this.state.isVerified && /*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 43\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"infoBlock\",\n        children: /*#__PURE__*/_jsxDEV(InfoBlock, {\n          isInitial: this.state.isInitial,\n          curLandmarkId: this.state.curLandmarkId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"map\",\n        children: /*#__PURE__*/_jsxDEV(Map, {\n          landmarks: this.state.landmarks,\n          handleClickLandmark: this.handleClickLandmark\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Main;","map":{"version":3,"names":["React","Component","axios","NavBar","Map","InfoBlock","jwtVerify","Main","constructor","props","handleClickLandmark","landmarkId","setState","curLandmarkId","isInitial","state","isVerified","landmarks","componentDidMount","res","get","data","e","console","log","render"],"sources":["/home/iowk/exhibition_map/frontend/src/main.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport './main.css';\n\nimport axios from './axios';\nimport NavBar from './components/navbar'\nimport Map from './components/map'\nimport InfoBlock from './components/infoblock'\nimport { jwtVerify } from './auth';\n\nclass Main extends Component {\n    // Full main page\n    constructor(props) {\n        super(props);\n        this.state = {\n            isInitial: true, // Initial main page without landmark clicked\n            isVerified: true,\n            landmarks: {}, // All landmarks on the map\n            curLandmarkId: 0, // ID of currently clicked landmark\n        };\n    }\n    async componentDidMount() {\n        // GET all landmarks on the map\n        try{\n            await jwtVerify();\n            this.setState({isVerified: true});\n            const res = await axios().get('/map/landmarks/');  \n            const landmarks = await res.data;\n            this.setState({landmarks: landmarks});\n        } catch (e) {\n            console.log(e);\n        }\n    }\n    handleClickLandmark = (landmarkId) => {\n        // Landmark is clicked on\n        this.setState({curLandmarkId: landmarkId, isInitial: false});    \n    }\n    render() {\n        return(            \n            <div>    \n                {this.state.isVerified && <NavBar></NavBar>}            \n                <div id=\"infoBlock\">\n                    {/* Block containing landmark information */}\n                    <InfoBlock\n                        isInitial = {this.state.isInitial}\n                        curLandmarkId = {this.state.curLandmarkId}\n                    />\n                </div>\n                <div id=\"map\">\n                    {/* Map */}\n                    <Map \n                        landmarks = {this.state.landmarks}\n                        handleClickLandmark = {this.handleClickLandmark}\n                    />\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Main;"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,YAAP;AAEA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,GAAP,MAAgB,kBAAhB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,SAASC,SAAT,QAA0B,QAA1B;;;AAEA,MAAMC,IAAN,SAAmBN,SAAnB,CAA6B;EACzB;EACAO,WAAW,CAACC,KAAD,EAAQ;IACf,MAAMA,KAAN;;IADe,KAqBnBC,mBArBmB,GAqBIC,UAAD,IAAgB;MAClC;MACA,KAAKC,QAAL,CAAc;QAACC,aAAa,EAAEF,UAAhB;QAA4BG,SAAS,EAAE;MAAvC,CAAd;IACH,CAxBkB;;IAEf,KAAKC,KAAL,GAAa;MACTD,SAAS,EAAE,IADF;MACQ;MACjBE,UAAU,EAAE,IAFH;MAGTC,SAAS,EAAE,EAHF;MAGM;MACfJ,aAAa,EAAE,CAJN,CAIS;;IAJT,CAAb;EAMH;;EACsB,MAAjBK,iBAAiB,GAAG;IACtB;IACA,IAAG;MACC,MAAMZ,SAAS,EAAf;MACA,KAAKM,QAAL,CAAc;QAACI,UAAU,EAAE;MAAb,CAAd;MACA,MAAMG,GAAG,GAAG,MAAMjB,KAAK,GAAGkB,GAAR,CAAY,iBAAZ,CAAlB;MACA,MAAMH,SAAS,GAAG,MAAME,GAAG,CAACE,IAA5B;MACA,KAAKT,QAAL,CAAc;QAACK,SAAS,EAAEA;MAAZ,CAAd;IACH,CAND,CAME,OAAOK,CAAP,EAAU;MACRC,OAAO,CAACC,GAAR,CAAYF,CAAZ;IACH;EACJ;;EAKDG,MAAM,GAAG;IACL,oBACI;MAAA,WACK,KAAKV,KAAL,CAAWC,UAAX,iBAAyB,QAAC,MAAD;QAAA;QAAA;QAAA;MAAA,QAD9B,eAEI;QAAK,EAAE,EAAC,WAAR;QAAA,uBAEI,QAAC,SAAD;UACI,SAAS,EAAI,KAAKD,KAAL,CAAWD,SAD5B;UAEI,aAAa,EAAI,KAAKC,KAAL,CAAWF;QAFhC;UAAA;UAAA;UAAA;QAAA;MAFJ;QAAA;QAAA;QAAA;MAAA,QAFJ,eASI;QAAK,EAAE,EAAC,KAAR;QAAA,uBAEI,QAAC,GAAD;UACI,SAAS,EAAI,KAAKE,KAAL,CAAWE,SAD5B;UAEI,mBAAmB,EAAI,KAAKP;QAFhC;UAAA;UAAA;UAAA;QAAA;MAFJ;QAAA;QAAA;QAAA;MAAA,QATJ;IAAA;MAAA;MAAA;MAAA;IAAA,QADJ;EAmBH;;AA/CwB;;AAkD7B,eAAeH,IAAf"},"metadata":{},"sourceType":"module"}