{"ast":null,"code":"var _jsxFileName = \"/home/iowk/exhibition_map/frontend/src/user.jsx\";\nimport React, { Component } from 'react';\nimport { Navigate } from \"react-router-dom\";\nimport './user.css';\nimport { jwtVerify, logout } from './auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass User extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMounted: false,\n      verified: false,\n      username: ''\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      isMounted: true\n    });\n    jwtVerify().then(res => {\n      if (this.state.isMounted) {\n        this.setState({\n          verified: true\n        });\n        this.setState({\n          username: localStorage.getItem('username')\n        });\n      }\n    });\n    return () => {\n      this.setState({\n        isMounted: false\n      });\n    };\n  }\n\n  logoutOnClick() {\n    logout();\n    this.setState({\n      username: ''\n    });\n  }\n\n  render() {\n    console.log(\"verified:\", this.state.verified);\n    console.log(\"username:\", this.state.username);\n\n    if (this.state.username || !this.state.verified) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"userInfo\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"User: \", this.state.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.logoutOnClick,\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 17\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/login/\",\n        replace: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n}\n\nexport default User;","map":{"version":3,"names":["React","Component","Navigate","jwtVerify","logout","User","constructor","props","state","isMounted","verified","username","componentDidMount","setState","then","res","localStorage","getItem","logoutOnClick","render","console","log"],"sources":["/home/iowk/exhibition_map/frontend/src/user.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { Navigate } from \"react-router-dom\";\nimport './user.css';\nimport {jwtVerify, logout} from './auth';\n\nclass User extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            isMounted: false,\n            verified: false,\n            username: '',\n        };\n    }\n    componentDidMount(){\n        this.setState({isMounted: true});\n        jwtVerify()\n        .then(res => {\n            if(this.state.isMounted){\n                this.setState({verified: true});\n                this.setState({username: localStorage.getItem('username')});\n            }\n        });\n        return () => {\n            this.setState({isMounted: false});\n        }        \n    }\n    logoutOnClick() {\n        logout();\n        this.setState({username: ''});\n    }\n    render() {\n        console.log(\"verified:\",this.state.verified);\n        console.log(\"username:\",this.state.username);\n        if(this.state.username || !this.state.verified) {\n            return(\n                <div className='userInfo'>\n                    <span>User: {this.state.username}</span>\n                    <button onClick={this.logoutOnClick}>\n                        Logout\n                    </button>\n                </div>\n            );\n        }\n        else{\n            return(\n                <Navigate to=\"/login/\" replace={true} />\n            );\n        }\n    }\n}\nexport default User;"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAO,YAAP;AACA,SAAQC,SAAR,EAAmBC,MAAnB,QAAgC,QAAhC;;;AAEA,MAAMC,IAAN,SAAmBJ,SAAnB,CAA6B;EACzBK,WAAW,CAACC,KAAD,EAAO;IACd,MAAMA,KAAN;IACA,KAAKC,KAAL,GAAa;MACTC,SAAS,EAAE,KADF;MAETC,QAAQ,EAAE,KAFD;MAGTC,QAAQ,EAAE;IAHD,CAAb;EAKH;;EACDC,iBAAiB,GAAE;IACf,KAAKC,QAAL,CAAc;MAACJ,SAAS,EAAE;IAAZ,CAAd;IACAN,SAAS,GACRW,IADD,CACMC,GAAG,IAAI;MACT,IAAG,KAAKP,KAAL,CAAWC,SAAd,EAAwB;QACpB,KAAKI,QAAL,CAAc;UAACH,QAAQ,EAAE;QAAX,CAAd;QACA,KAAKG,QAAL,CAAc;UAACF,QAAQ,EAAEK,YAAY,CAACC,OAAb,CAAqB,UAArB;QAAX,CAAd;MACH;IACJ,CAND;IAOA,OAAO,MAAM;MACT,KAAKJ,QAAL,CAAc;QAACJ,SAAS,EAAE;MAAZ,CAAd;IACH,CAFD;EAGH;;EACDS,aAAa,GAAG;IACZd,MAAM;IACN,KAAKS,QAAL,CAAc;MAACF,QAAQ,EAAE;IAAX,CAAd;EACH;;EACDQ,MAAM,GAAG;IACLC,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAwB,KAAKb,KAAL,CAAWE,QAAnC;IACAU,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAwB,KAAKb,KAAL,CAAWG,QAAnC;;IACA,IAAG,KAAKH,KAAL,CAAWG,QAAX,IAAuB,CAAC,KAAKH,KAAL,CAAWE,QAAtC,EAAgD;MAC5C,oBACI;QAAK,SAAS,EAAC,UAAf;QAAA,wBACI;UAAA,qBAAa,KAAKF,KAAL,CAAWG,QAAxB;QAAA;UAAA;UAAA;UAAA;QAAA,QADJ,eAEI;UAAQ,OAAO,EAAE,KAAKO,aAAtB;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAFJ;MAAA;QAAA;QAAA;QAAA;MAAA,QADJ;IAQH,CATD,MAUI;MACA,oBACI,QAAC,QAAD;QAAU,EAAE,EAAC,SAAb;QAAuB,OAAO,EAAE;MAAhC;QAAA;QAAA;QAAA;MAAA,QADJ;IAGH;EACJ;;AA5CwB;;AA8C7B,eAAeb,IAAf"},"metadata":{},"sourceType":"module"}