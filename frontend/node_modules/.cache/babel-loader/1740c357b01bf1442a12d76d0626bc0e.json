{"ast":null,"code":"var _jsxFileName = \"/home/iowk/exhibition_map/frontend/src/components/infoblock.jsx\";\nimport React, { Component } from 'react';\nimport Landmark from './landmark';\nimport Content from './content';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass InfoBlock extends Component {\n  // Block containing landmark information \n  constructor(props) {\n    super(props);\n    this.state = {\n      isInitial: true,\n      // Initial main page without landmark clicked\n      curLandmarkId: 0,\n      // ID of currently clicked landmark\n      landmark: {},\n      // Currently clicked landmark\n      contents: {} // Contents of the currently clicked landmark\n\n    };\n  }\n\n  async componentDidUpdate() {\n    try {\n      if (!this.props.isInitial && this.state.curLandmarkId !== this.props.curLandmarkId) {\n        // GET landmarks\n        const res_lm = await axios().get('/map/landmarks/' + this.props.curLandmarkId.toString() + '/');\n        const landmark = await res_lm.data; // GET contents\n\n        const res_cons = await axios().get('/map/landmarks/' + this.props.curLandmarkId.toString() + '/contents/');\n        const contents = await res_cons.data; // Set state for InfoBlock\n\n        this.setState({\n          curLandmarkId: this.props.curLandmarkId\n        });\n        this.setState({\n          isInitial: false\n        });\n        this.setState({\n          landmark: landmark\n        });\n        this.setState({\n          contents: contents\n        });\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  setLandmarkBox(landmark) {\n    return /*#__PURE__*/_jsxDEV(Landmark, {\n      lmid: landmark['id'],\n      name: landmark['name'],\n      link: landmark['link'],\n      coverImageSrc: landmark['coverImageSrc'],\n      avgRating: landmark['avgRating']\n    }, landmark['name'], false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 16\n    }, this);\n  }\n\n  setContentBox(lmid, content) {\n    return /*#__PURE__*/_jsxDEV(Content, {\n      lmid: lmid,\n      ctid: content['id'],\n      name: content['name'],\n      startDate: content['startDate'],\n      endDate: content['endDate'],\n      link: content['link'],\n      coverImageSrc: content['coverImageSrc'],\n      avgRating: content['avgRating']\n    }, content['name'], false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 16\n    }, this);\n  }\n\n  render() {\n    if (this.state.isInitial) {\n      // Initial main page without landmark clicked\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \" Click a landmark \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this);\n    } else {\n      var children = [];\n\n      if (Object.keys(this.state.landmark).length > 0) {\n        children.push(this.setLandmarkBox(this.state.landmark));\n      }\n\n      for (var key in this.state.contents) {\n        if (this.state.contents[key]['isGoing']) {\n          // Ongoing event content       \n          children.push(this.setContentBox(this.state.curLandmarkId, this.state.contents[key]));\n        }\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n}\n\nexport default InfoBlock;","map":{"version":3,"names":["React","Component","Landmark","Content","InfoBlock","constructor","props","state","isInitial","curLandmarkId","landmark","contents","componentDidUpdate","res_lm","axios","get","toString","data","res_cons","setState","e","console","log","setLandmarkBox","setContentBox","lmid","content","render","children","Object","keys","length","push","key"],"sources":["/home/iowk/exhibition_map/frontend/src/components/infoblock.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport Landmark from './landmark';\nimport Content from './content';\n\nclass InfoBlock extends Component {\n    // Block containing landmark information \n    constructor(props) {\n        super(props);\n        this.state = {\n            isInitial: true, // Initial main page without landmark clicked\n            curLandmarkId: 0, // ID of currently clicked landmark\n            landmark: {}, // Currently clicked landmark\n            contents: {}, // Contents of the currently clicked landmark\n        };\n    }\n    async componentDidUpdate() {\n        try{\n            if(!(this.props.isInitial) && this.state.curLandmarkId!==this.props.curLandmarkId){\n                // GET landmarks\n                const res_lm = await axios().get('/map/landmarks/'+this.props.curLandmarkId.toString()+'/');            \n                const landmark = await res_lm.data;\n                // GET contents\n                const res_cons = await axios().get('/map/landmarks/'+this.props.curLandmarkId.toString()+'/contents/');            \n                const contents = await res_cons.data;\n                // Set state for InfoBlock\n                this.setState({curLandmarkId: this.props.curLandmarkId});\n                this.setState({isInitial: false});\n                this.setState({landmark: landmark});\n                this.setState({contents: contents});\n            }            \n        } catch (e) {\n            console.log(e);\n        }\n    }\n    setLandmarkBox(landmark) {\n        return <Landmark\n            lmid={landmark['id']}\n            key={landmark['name']}\n            name={landmark['name']}\n            link={landmark['link']}\n            coverImageSrc={landmark['coverImageSrc']}\n            avgRating={landmark['avgRating']}\n        />;\n    }\n    setContentBox(lmid, content) {\n        return <Content\n            lmid={lmid}\n            ctid={content['id']}\n            key={content['name']}\n            name={content['name']}\n            startDate={content['startDate']}\n            endDate={content['endDate']}\n            link={content['link']}\n            coverImageSrc={content['coverImageSrc']}\n            avgRating={content['avgRating']}\n        />;\n    }\n    render() {\n        if(this.state.isInitial){\n            // Initial main page without landmark clicked\n            return(\n                <div> Click a landmark </div>\n            );\n        }\n        else{\n            var children = [];\n            if(Object.keys(this.state.landmark).length > 0){\n                children.push(this.setLandmarkBox(this.state.landmark));\n            }            \n            for(var key in this.state.contents) {\n                if(this.state.contents[key]['isGoing']){ \n                    // Ongoing event content       \n                    children.push(this.setContentBox(this.state.curLandmarkId,this.state.contents[key]));\n                }\n            }\n            return (\n                <div>\n                    {children}\n                </div>\n            );   \n        }         \n    }\n}\nexport default InfoBlock"],"mappings":"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"},"metadata":{},"sourceType":"module"}