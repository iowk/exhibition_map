{"ast":null,"code":"import axios from './axios';\nexport async function login(username, password) {\n  axios.post('/map/login/', JSON.stringify({\n    username: username,\n    password: password\n  }), {\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    }\n  }).then(res => {\n    logout();\n    localStorage.setItem('access_jwt', res.data['access']);\n    localStorage.setItem('refresh_jwt', res.data['refresh']);\n    return new Promise(resolve => {\n      resolve();\n    });\n  }).catch(e => {\n    console.log(e.message);\n    console.log(\"Login\");\n    return new Promise(resolve => {\n      resolve();\n    });\n  });\n}\nexport function logout() {\n  console.log(\"Logout\");\n  localStorage.setItem('access_jwt', '');\n  localStorage.setItem('refresh_jwt', '');\n}\nexport async function jwtVerify() {\n  let a_jwt = localStorage.getItem('access_jwt');\n  if (!a_jwt) return new Promise(resolve => {\n    resolve(false);\n  });\n  ;\n  axios.post('/map/token/verify/', JSON.stringify({\n    token: a_jwt\n  }), {\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    }\n  }).then(res => {\n    console.log(\"TRUE\");\n    return new Promise(resolve => {\n      resolve(true);\n    });\n  }).catch(e => {\n    let r_jwt = localStorage.getItem('refresh_jwt');\n    if (!r_jwt) return false;\n    axios.post('/map/token/refresh/', JSON.stringify({\n      token: r_jwt\n    }), {\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      localStorage.setItem('access_jwt', res.data['access']);\n      return new Promise(resolve => {\n        resolve(true);\n      });\n    }).catch(e => {\n      return new Promise(resolve => {\n        resolve(false);\n      });\n    });\n  });\n}","map":{"version":3,"names":["axios","login","username","password","post","JSON","stringify","headers","then","res","logout","localStorage","setItem","data","Promise","resolve","catch","e","console","log","message","jwtVerify","a_jwt","getItem","token","r_jwt"],"sources":["/home/iowk/exhibition_map/frontend/src/auth.js"],"sourcesContent":["import axios from './axios';\n\nexport async function login(username, password){\n    axios.post('/map/login/', JSON.stringify({\n        username: username,\n        password: password,\n    }),\n    {\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        }\n    })\n    .then(res => {\n        logout();\n        localStorage.setItem('access_jwt', res.data['access']);\n        localStorage.setItem('refresh_jwt', res.data['refresh']);\n        return new Promise((resolve) => {\n            resolve();\n        });\n    })\n    .catch (e => {\n        console.log(e.message);\n        console.log(\"Login\");\n        return new Promise((resolve) => {\n            resolve();\n        });\n    });\n}\n\nexport function logout(){\n    console.log(\"Logout\");\n    localStorage.setItem('access_jwt', '');\n    localStorage.setItem('refresh_jwt', '');\n}\n\nexport async function jwtVerify(){\n    let a_jwt = localStorage.getItem('access_jwt');\n    if(!a_jwt) return new Promise((resolve) => {\n        resolve(false);\n    });;\n    axios.post('/map/token/verify/', JSON.stringify({\n        token: a_jwt,\n    }),\n    {\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        }\n    })\n    .then(res => {\n        console.log(\"TRUE\");\n        return new Promise((resolve) => {\n            resolve(true);\n        });\n    })\n    .catch (e => {\n        let r_jwt = localStorage.getItem('refresh_jwt');\n        if(!r_jwt) return false;\n        axios.post('/map/token/refresh/', JSON.stringify({\n            token: r_jwt,\n        }),\n        {\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n        .then(res => {\n            localStorage.setItem('access_jwt', res.data['access']);\n            return new Promise((resolve) => {\n                resolve(true);\n            });\n        })\n        .catch (e => {\n            return new Promise((resolve) => {\n                resolve(false);\n            });\n        })\n    });\n}"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,SAAlB;AAEA,OAAO,eAAeC,KAAf,CAAqBC,QAArB,EAA+BC,QAA/B,EAAwC;EAC3CH,KAAK,CAACI,IAAN,CAAW,aAAX,EAA0BC,IAAI,CAACC,SAAL,CAAe;IACrCJ,QAAQ,EAAEA,QAD2B;IAErCC,QAAQ,EAAEA;EAF2B,CAAf,CAA1B,EAIA;IACII,OAAO,EAAE;MACL,UAAU,kBADL;MAEL,gBAAgB;IAFX;EADb,CAJA,EAUCC,IAVD,CAUMC,GAAG,IAAI;IACTC,MAAM;IACNC,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmCH,GAAG,CAACI,IAAJ,CAAS,QAAT,CAAnC;IACAF,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAoCH,GAAG,CAACI,IAAJ,CAAS,SAAT,CAApC;IACA,OAAO,IAAIC,OAAJ,CAAaC,OAAD,IAAa;MAC5BA,OAAO;IACV,CAFM,CAAP;EAGH,CAjBD,EAkBCC,KAlBD,CAkBQC,CAAC,IAAI;IACTC,OAAO,CAACC,GAAR,CAAYF,CAAC,CAACG,OAAd;IACAF,OAAO,CAACC,GAAR,CAAY,OAAZ;IACA,OAAO,IAAIL,OAAJ,CAAaC,OAAD,IAAa;MAC5BA,OAAO;IACV,CAFM,CAAP;EAGH,CAxBD;AAyBH;AAED,OAAO,SAASL,MAAT,GAAiB;EACpBQ,OAAO,CAACC,GAAR,CAAY,QAAZ;EACAR,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmC,EAAnC;EACAD,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAoC,EAApC;AACH;AAED,OAAO,eAAeS,SAAf,GAA0B;EAC7B,IAAIC,KAAK,GAAGX,YAAY,CAACY,OAAb,CAAqB,YAArB,CAAZ;EACA,IAAG,CAACD,KAAJ,EAAW,OAAO,IAAIR,OAAJ,CAAaC,OAAD,IAAa;IACvCA,OAAO,CAAC,KAAD,CAAP;EACH,CAFiB,CAAP;EAER;EACHf,KAAK,CAACI,IAAN,CAAW,oBAAX,EAAiCC,IAAI,CAACC,SAAL,CAAe;IAC5CkB,KAAK,EAAEF;EADqC,CAAf,CAAjC,EAGA;IACIf,OAAO,EAAE;MACL,UAAU,kBADL;MAEL,gBAAgB;IAFX;EADb,CAHA,EASCC,IATD,CASMC,GAAG,IAAI;IACTS,OAAO,CAACC,GAAR,CAAY,MAAZ;IACA,OAAO,IAAIL,OAAJ,CAAaC,OAAD,IAAa;MAC5BA,OAAO,CAAC,IAAD,CAAP;IACH,CAFM,CAAP;EAGH,CAdD,EAeCC,KAfD,CAeQC,CAAC,IAAI;IACT,IAAIQ,KAAK,GAAGd,YAAY,CAACY,OAAb,CAAqB,aAArB,CAAZ;IACA,IAAG,CAACE,KAAJ,EAAW,OAAO,KAAP;IACXzB,KAAK,CAACI,IAAN,CAAW,qBAAX,EAAkCC,IAAI,CAACC,SAAL,CAAe;MAC7CkB,KAAK,EAAEC;IADsC,CAAf,CAAlC,EAGA;MACIlB,OAAO,EAAE;QACL,UAAU,kBADL;QAEL,gBAAgB;MAFX;IADb,CAHA,EASCC,IATD,CASMC,GAAG,IAAI;MACTE,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmCH,GAAG,CAACI,IAAJ,CAAS,QAAT,CAAnC;MACA,OAAO,IAAIC,OAAJ,CAAaC,OAAD,IAAa;QAC5BA,OAAO,CAAC,IAAD,CAAP;MACH,CAFM,CAAP;IAGH,CAdD,EAeCC,KAfD,CAeQC,CAAC,IAAI;MACT,OAAO,IAAIH,OAAJ,CAAaC,OAAD,IAAa;QAC5BA,OAAO,CAAC,KAAD,CAAP;MACH,CAFM,CAAP;IAGH,CAnBD;EAoBH,CAtCD;AAuCH"},"metadata":{},"sourceType":"module"}