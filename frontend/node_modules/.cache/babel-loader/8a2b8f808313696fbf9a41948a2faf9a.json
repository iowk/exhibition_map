{"ast":null,"code":"var _jsxFileName = \"/home/iowk/exhibition_map/frontend/src/register.jsx\";\nimport React, { Component } from 'react';\nimport './register.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst backendPath = 'http://localhost:8000';\n\nclass Register extends Component {\n  // Full register page\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = event => {\n      // POST username, email and password\n      if (this.state.password !== e.target.password) return;\n      fetch(backendPath + '/map/users/register/', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username: this.state.username,\n          email: this.state.email,\n          password: this.state.password\n        })\n      }).then(res => {\n        if (!res.ok) {\n          return res.json().then(res_json => {\n            this.setState({\n              err: res_json\n            });\n          }).catch(err => {\n            alert(err);\n          });\n          ;\n        } else {\n          this.clearErr();\n          this.setState({\n            buttomMessage: 'Registration success. Verification e-mail is sent to ' + this.state.email\n          });\n          this.clearInput();\n        }\n      });\n      event.preventDefault();\n    };\n\n    this.state = {\n      username: '',\n      email: '',\n      password: '',\n      passwordConf: '',\n      err: {\n        username: '',\n        email: '',\n        password: '',\n        passwordConf: ''\n      },\n      buttomMessage: ''\n    };\n  }\n\n  handleOnChangePasswordConf(e) {\n    let errCopy = this.state.err;\n\n    if (this.state.password === e.target.value) {\n      errCopy.passwordConf = '';\n      this.setState({\n        err: errCopy\n      });\n      this.setState({\n        passwordConf: e.target.value\n      });\n    } else {\n      errCopy.passwordConf = 'Confirm password incorrect';\n      this.setState({\n        err: errCopy\n      });\n      this.setState({\n        passwordConf: e.target.value\n      });\n    }\n  }\n\n  clearErr() {\n    let err_cpy = {};\n\n    for (var key in this.state.err) {\n      err_cpy[key] = '';\n    }\n\n    this.setState({\n      err: err_cpy\n    });\n  }\n\n  clearInput() {\n    this.setState({\n      username: ''\n    });\n    this.setState({\n      email: ''\n    });\n    this.setState({\n      password: ''\n    });\n    this.setState({\n      passwordConf: ''\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"register\",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.handleSubmit.bind(this),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inpDiv\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            onChange: e => this.setState({\n              username: e.target.value\n            }),\n            className: \"inpBox\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"errDiv\",\n          children: this.state.err.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inpDiv\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            onChange: e => this.setState({\n              email: e.target.value\n            }),\n            className: \"inpBox\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"errDiv\",\n          children: this.state.err.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inpDiv\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            onChange: e => this.setState({\n              password: e.target.value\n            }),\n            className: \"inpBox\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"errDiv\",\n          children: this.state.err.password\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inpDiv\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Confirm Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            onChange: this.handleOnChangePasswordConf,\n            className: \"inpBox\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"errDiv\",\n          children: this.state.err.passwordConf\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"submitButton\",\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"buttomMessage\",\n        children: this.state.buttomMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Register;","map":{"version":3,"names":["React","Component","backendPath","Register","constructor","props","handleSubmit","event","state","password","e","target","fetch","method","headers","body","JSON","stringify","username","email","then","res","ok","json","res_json","setState","err","catch","alert","clearErr","buttomMessage","clearInput","preventDefault","passwordConf","handleOnChangePasswordConf","errCopy","value","err_cpy","key","render","bind"],"sources":["/home/iowk/exhibition_map/frontend/src/register.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport './register.css';\n\nconst backendPath = 'http://localhost:8000'\n\nclass Register extends Component {\n    // Full register page\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: '',\n            email: '',\n            password: '',\n            passwordConf: '',\n            err: {\n                username: '',\n                email: '',\n                password: '',\n                passwordConf: '',\n            },\n            buttomMessage: '',\n        };\n    }\n    handleOnChangePasswordConf(e){\n        let errCopy = this.state.err;\n        if(this.state.password===e.target.value){\n            errCopy.passwordConf = '';\n            this.setState({err:errCopy});\n            this.setState({passwordConf:e.target.value});\n        }\n        else{\n            errCopy.passwordConf = 'Confirm password incorrect';\n            this.setState({err:errCopy});\n            this.setState({passwordConf:e.target.value});\n        }\n    }    \n    clearErr(){\n        let err_cpy = {};\n        for(var key in this.state.err){\n            err_cpy[key] = '';\n        }\n        this.setState({err: err_cpy});\n    }\n    clearInput(){\n        this.setState({username: ''});\n        this.setState({email: ''});\n        this.setState({password: ''});\n        this.setState({passwordConf: ''});\n    }\n    handleSubmit = (event) => {\n        // POST username, email and password\n        if(this.state.password!==e.target.password) return;\n        fetch(backendPath+'/map/users/register/', {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                username: this.state.username,\n                email: this.state.email,\n                password: this.state.password,\n            })\n        })\n        .then(res => {\n            if(!res.ok){\n                return res.json()\n                .then(res_json => {\n                    this.setState({err:res_json});\n                })\n                .catch(err => {\n                    alert(err);\n                });;\n            }\n            else{\n                this.clearErr();                  \n                this.setState({buttomMessage: 'Registration success. Verification e-mail is sent to ' + this.state.email});\n                this.clearInput();\n            }\n        })\n        event.preventDefault();\n    }\n    render() {\n        return(\n            <div id=\"register\">\n                <form onSubmit={this.handleSubmit.bind(this)}>\n                <div className='inpDiv'>\n                    <span>Username</span>\n                    <input\n                        type='text'\n                        onChange={(e) => this.setState({username: e.target.value})}\n                        className='inpBox'\n                    />\n                </div>\n                <div className='errDiv'>{this.state.err.username}</div>\n                <div className='inpDiv'>\n                    <span>Email</span>\n                    <input\n                        type='text'\n                        onChange={(e) => this.setState({email: e.target.value})}\n                        className='inpBox'\n                    />\n                </div>\n                <div className='errDiv'>{this.state.err.email}</div>\n                <div className='inpDiv'>\n                    <span>Password</span>\n                    <input\n                        type='password'\n                        onChange={(e) => this.setState({password: e.target.value})}\n                        className='inpBox'\n                    />\n                </div>\n                <div className='errDiv'>{this.state.err.password}</div>\n                <div className='inpDiv'>\n                    <span>Confirm Password</span>\n                    <input\n                        type='password'\n                        onChange={this.handleOnChangePasswordConf}\n                        className='inpBox'\n                    />\n                </div>\n                <div className='errDiv'>{this.state.err.passwordConf}</div>\n                <button type=\"submit\" className='submitButton'>\n                    Register\n                </button>\n                </form>\n                <div className='buttomMessage'>{this.state.buttomMessage}</div>\n            </div>);\n    }\n}\nexport default Register;"],"mappings":"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"},"metadata":{},"sourceType":"module"}